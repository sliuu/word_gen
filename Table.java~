import structure5.*;
import java.util.Random;
import java.util.Scanner;

public class Table {
    
    protected Vector<Association<String, FrequencyList>> tableOne;
    
    public Table(String text) {

	tableOne = new Vector<Association<String, FrequencyList>>();
	String key;

	//Scanner in = new Scanner(System.in);
	
	// Look at every 3-letter combination in the phrase and add it to the vector
	for (int i = 0; i < text.length()-3; i++){
	    key = text.substring(i, i+3);
	    tableOne.add(new Association(key, new FrequencyList(key, text)));
	    //System.out.println(key);
	}
	
    }

    // Generate a next random character using the probabilites 
    public String getNext(String theKey) {

	String alphabet = "abcdefghijklmnopqrstuvwxyz";
	Random r = new Random();
	String theChar; 
	int index = tableOne.indexOf(new Association(theKey)); // Look for the Association with theKey
	if (index >= 0) {
	    FrequencyList freqList = tableOne.get(index).getValue(); // Get the FrequencyList
	    theChar = freqList.randNext();
	} else {
	    theChar =  "" + alphabet.charAt(r.nextInt(alphabet.length()));
	}
	return theChar;
    }
    public static void main(String[] args) {
	
	Table theTable = new Table("their house was very big");
	System.out.println(theTable.getNext("the"));
    }

}
